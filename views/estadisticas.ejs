<!DOCTYPE html>
<html>
<head>
    <title>Estad√≠sticas</title>
    <meta charset="utf-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/estilos/estilos.css" rel="stylesheet">
</head>
<body class="container mt-4">

<!-- ENCABEZADO -->
<h1>üìä Estad√≠sticas por Barrio</h1>
<a href="/" class="btn btn-secondary mb-3">‚Üê Volver</a>

<!-- TOTAL -->
<div class="total-badge">
    Total: <%= totalContactos %> contactos
</div>

<!-- LISTA DE BARRIOS -->
<div class="col-md-10">
    <%
    // Colores para las barras
    const colores = ['primary', 'success', 'info', 'warning', 'danger'];

    // Recorrer cada barrio
    barrios.forEach(function(barrio, i) {
        const color = colores[i % colores.length];
    %>

    <div class="stat-card">
        <!-- Nombre del barrio -->
        <h5><%= barrio.barrio || 'Sin barrio' %></h5>

        <!-- Cantidad y porcentaje -->
        <div class="stat-info">
            <span><%= barrio.cantidad %> contactos</span>
            <span><%= barrio.porcentaje %>%</span>
        </div>

        <!-- Barra de progreso -->
        <div class="progress">
            <div class="progress-bar bg-<%= color %>"
                 style="width: <%= barrio.porcentaje %>%">
                <%= barrio.porcentaje %>%
            </div>
        </div>
    </div>

    <% }); %>
</div>

<!-- ANIMACI√ìN DE BARRAS -->
<script>
    // Cuando carga la p√°gina, anima las barras
    window.onload = function() {
        // Obtener todas las barras
        const barras = document.querySelectorAll('.progress-bar');

        // Para cada barra
        barras.forEach(barra => {
            const ancho = barra.style.width;  // Guardar ancho final
            barra.style.width = '0%';          // Empezar en 0
            setTimeout(() => {
                barra.style.width = ancho;     // Crecer al ancho final
            }, 100);
        });
    };
</script>

</body>
</html>