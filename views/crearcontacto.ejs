<!DOCTYPE html>
<html>
<head>
    <title>Crear Contacto</title>
    <meta charset="utf-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/estilos/estilos.css" rel="stylesheet">
</head>
<body class="container mt-4">

<h2>Crear Contacto</h2>
<a href="/" class="btn btn-secondary mb-3">← Volver</a>

<form method="POST" action="/contacto" class="formulario-contacto">
    <!-- NO incluir campo id_contacto, se genera automáticamente -->
    <input type="text" class="form-control mb-2" name="primer_nombre" placeholder="Primer Nombre *" required>
    <input type="text" class="form-control mb-2" name="segundo_nombre" placeholder="Segundo Nombre">
    <input type="text" class="form-control mb-2" name="primer_apellido" placeholder="Primer Apellido *" required>
    <input type="text" class="form-control mb-2" name="segundo_apellido" placeholder="Segundo Apellido">

    <select class="form-select mb-2" name="id_genero" id="genero" required>
        <option value="">Género *</option>
        <% generos.forEach(function(g) { %>
            <option value="<%= g.id_genero %>"><%= g.detalle_genero %></option>
        <% }); %>
    </select>

    <select class="form-select mb-2" name="id_direccion" id="direccion">
        <option value="">Dirección (opcional)</option>
        <% direcciones.forEach(function(d) { %>
            <option value="<%= d.id_direccion %>"><%= d.detalle_direccion %></option>
        <% }); %>
    </select>

    <select class="form-select mb-2" name="id_tipo_telefono" id="tipo">
        <option value="">Tipo Teléfono (opcional)</option>
        <% tipos.forEach(function(t) { %>
            <option value="<%= t.id_tipo_telefono %>"><%= t.detalle_tipo_telefono %></option>
        <% }); %>
    </select>

    <input type="email" class="form-control mb-2" name="email" placeholder="Email">
    <input type="text" class="form-control mb-2" name="telefono" placeholder="Teléfono">
    <input type="text" class="form-control mb-2" name="imagen" placeholder="Imagen (URL)">

    <button type="submit" class="btn btn-primary w-100">Guardar</button>
</form>

<script>
    // Limpiar campos vacíos antes de enviar
    document.querySelector('form').addEventListener('submit', function(e) {
        const selects = this.querySelectorAll('select');
        selects.forEach(select => {
            if (select.value === '') {
                select.removeAttribute('name');
            }
        });
    });
</script>

</body>
</html>