<!DOCTYPE html>
<html>

<head>
    <title>Contactos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="container mt-4">
    <h1 class="text-center">DIRECTORIO DE CONTACTOS</h1>

    <div class="mb-3">
        <a href="/crearcontacto" class="btn btn-success">➕ Nuevo Contacto</a>
        <a href="/estadisticas" class="btn btn-primary">Estadísticas</a>
    </div>

    <div class="table-responsive">
        <table class="table table-striped">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Nombre Completo</th>
                    <th>Género</th>
                    <th>Dirección</th>
                    <th>Teléfono</th>
                    <th>Email</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <% if (contactos.length===0) { %>
                    <tr>
                        <td colspan="6" class="text-center text-muted">
                            No hay contactos registrados
                        </td>
                    </tr>
                    <% } else { %>
                        <% contactos.forEach(function(c) { %>
                            <tr>
                                <td>
                                    <%= c.id_contacto %>
                                </td>
                                <td>
                                    <%= c.primer_nombre %>
                                        <%= c.segundo_nombre || '' %>
                                            <%= c.primer_apellido %>
                                                <%= c.segundo_apellido || '' %>
                                </td>
                                <td>
                                    <%= c.detalle_genero || '-' %>
                                </td>
                                <td>
                                    <%= c.detalle_direccion || '-' %>
                                </td>
                                <td>
                                    <%= c.telefono || '-' %>
                                </td>
                                <td>
                                    <%= c.email || '-' %>
                                </td>
                                <td>
                                    <a href="/editarcontacto/<%= c.id_contacto %>"
                                        class="btn btn-warning btn-sm">Editar</a>
                                    <form method="POST" action="/contacto/<%= c.id_contacto %>" class="d-inline">
                                        <button type="submit" class="btn btn-danger btn-sm">Eliminar</button>
                                    </form>
                                </td>
                            </tr>
                            <% }); %>
                                <% } %>
            </tbody>
        </table>
    </div>

    <div class="mt-3">
        <small>Total: <%= contactos.length %> contactos</small>
    </div>
</body>

</html>